<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IFSP Eventos - Guarulhos</title>
    <!-- Link para o arquivo CSS externo -->
    <link rel="stylesheet" href="style.css">
    <!-- Google Fonts: Material Symbols Outlined -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>
<body>

<div id="app-container">
    
    <!-- TOPO (Header din√¢mico) -->
    <header id="main-header" class="hidden">
        <div style="display: flex; align-items: center;">
            <button class="back-btn hidden" id="btn-back" onclick="goBack()">
                <span class="material-symbols-outlined">arrow_back</span>
            </button>
            <div>
                <div class="logo-text">IFSP Eventos</div>
                <span class="campus-text">C√¢mpus Guarulhos</span>
            </div>
        </div>
        <div class="header-actions">
            <!-- √çcone de Notifica√ß√£o -->
            <button onclick="toggleNotifications()" class="icon-btn" style="position: relative;">
                <span class="material-symbols-outlined">notifications</span>
                <span id="notif-badge" class="badge hidden">0</span>
            </button>
            
            <!-- Menu Usuario -->
            <span id="user-name-display" style="font-size: 0.8rem; font-weight: bold; vertical-align: middle; margin-left: 8px; margin-right: 8px;">Visitante</span>
            
            <!-- Bot√£o Sair (Logout) -->
            <button onclick="doLogout()" title="Sair" class="icon-btn">
                <span class="material-symbols-outlined">logout</span>
            </button>
        </div>
    </header>

    <!-- MODAL DE NOTIFICA√á√ïES -->
    <div id="modal-notifications" class="modal-overlay hidden" onclick="if(event.target === this) toggleNotifications()">
        <div class="modal-content">
            <h3>Notifica√ß√µes</h3>
            <div id="notifications-list">
                <!-- Inserido via JS -->
            </div>
            <button class="btn btn-secondary" onclick="toggleNotifications()">Fechar</button>
        </div>
    </div>

    <!-- MODAL SELE√á√ÉO DE TIME (INSCRICAO) -->
    <div id="modal-team-select" class="modal-overlay hidden">
        <div class="modal-content">
            <h3>Escolha um Time</h3>
            <p class="text-small" style="margin-bottom: 10px;">Qual time voc√™ deseja inscrever?</p>
            <div id="team-select-list" style="display: flex; flex-direction: column; gap: 8px; margin-bottom: 15px;">
                <!-- Op√ß√µes via JS -->
            </div>
            <button class="btn btn-secondary" onclick="closeTeamSelect()">Cancelar</button>
        </div>
    </div>

    <!-- TELA 1: LOGIN -->
    <div id="screen-login" class="view active" style="justify-content: center; background: linear-gradient(135deg, var(--ifsp-green) 0%, var(--ifsp-green-dark) 100%); color: white;">
        <div class="text-center" style="margin-bottom: 40px;">
            <h1 style="font-size: 2.5rem; margin-bottom: 10px;">IFSP</h1>
            <p>Sistema de Competi√ß√µes</p>
        </div>
        
        <div style="background: white; padding: 24px; border-radius: 16px; color: #333;">
            <div class="form-group">
                <label>E-mail Institucional</label>
                <input type="email" id="login-email" placeholder="aluno@aluno.ifsp.edu.br" value="aluno@aluno.ifsp.edu.br">
            </div>
            <div class="form-group">
                <label>Senha</label>
                <input type="password" id="login-password" value="123456">
            </div>
            <button class="btn btn-primary" onclick="doLogin()">ENTRAR</button>
            <div class="text-center" style="margin-top: 15px;">
                <a href="#" onclick="forgotPassword()" style="color: var(--ifsp-green); font-size: 0.9rem;">Esqueci minha senha</a>
            </div>
        </div>
        
        <div class="text-center" style="margin-top: 30px; font-size: 0.8rem; opacity: 0.8;">
            Dica: Use "gestor@..." para ver fun√ß√µes administrativas.
        </div>
    </div>

    <!-- TELA 2: FEED (HOME) -->
    <div id="screen-feed" class="view">
        <h2 style="margin-bottom: 16px;">Eventos Dispon√≠veis</h2>
        
        <!-- Filtros -->
        <div style="display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; margin-bottom: 10px;">
            <span class="tag aberto" onclick="filterEvents('all')" style="cursor:pointer;">Todos</span>
            <span class="tag" onclick="filterEvents('Futsal')" style="background:#eee; color:#555; cursor:pointer;">Futsal</span>
            <span class="tag" onclick="filterEvents('Volei')" style="background:#eee; color:#555; cursor:pointer;">V√¥lei</span>
            <span class="tag" onclick="filterEvents('Xadrez')" style="background:#eee; color:#555; cursor:pointer;">Xadrez</span>
            <span class="tag" onclick="filterEvents('Handebol')" style="background:#eee; color:#555; cursor:pointer;">Handebol</span>
        </div>

        <div id="events-list">
            <!-- Inserido via JS -->
        </div>

        <!-- Bot√£o Flutuante (Gestor) -->
        <div id="fab-create" class="btn-float" onclick="navigateTo('screen-create-event')">
            <span class="material-symbols-outlined">add</span>
        </div>
    </div>

    <!-- TELA: COMUNIDADES -->
    <div id="screen-communities" class="view">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
            <h2>Comunidades</h2>
            <button class="btn-small" onclick="navigateTo('screen-create-community')">+ Criar</button>
        </div>
        <p class="text-small" style="margin-bottom: 15px;">Participe dos grupos e interaja no mural.</p>

        <div id="communities-list">
            <!-- Inserido via JS -->
        </div>
    </div>

    <!-- TELA: DETALHES DA COMUNIDADE (MURAL SOCIAL) -->
    <div id="screen-community-details" class="view">
        <div id="comm-header" style="border-bottom: 1px solid #eee; padding-bottom: 15px; margin-bottom: 15px;">
            <!-- Inserido via JS -->
        </div>

        <div class="post-creator-area">
            <div style="display:flex; gap:10px; align-items:center; margin-bottom:10px;">
                <div class="avatar-small" id="user-avatar-post">U</div>
                <input type="text" id="post-input" placeholder="No que voc√™ est√° pensando?" style="flex:1; border:none; background:transparent; outline:none;">
            </div>
            <div style="display:flex; justify-content:flex-end;">
                <button class="btn-small" onclick="handlePost()">Publicar</button>
            </div>
        </div>

        <h4 style="margin-bottom: 10px; color:#555;">Mural de Discuss√£o</h4>
        <div id="community-feed-list">
            <!-- Posts inseridos via JS -->
        </div>
    </div>

    <!-- TELA: CRIAR COMUNIDADE -->
    <div id="screen-create-community" class="view">
        <h2 style="margin-bottom: 20px;">Nova Comunidade</h2>
        <form onsubmit="handleCreateCommunity(event)">
            <div class="form-group">
                <label>Nome da Comunidade</label>
                <input type="text" id="comm-name" required placeholder="Ex: Atl√©tica da Inform√°tica">
            </div>
            <div class="form-group">
                <label>Descri√ß√£o</label>
                <textarea id="comm-desc" rows="3" placeholder="Objetivo da comunidade..."></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Criar Comunidade</button>
        </form>
    </div>

    <!-- TELA: MEUS EVENTOS E TIMES -->
    <div id="screen-my-events" class="view">
        
        <!-- Se√ß√£o Times -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <h2>Meus Times</h2>
            <button class="btn-small" onclick="navigateTo('screen-create-team')">+ Criar Time</button>
        </div>
        <div id="my-teams-slider" style="display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; margin-bottom: 20px;">
            <!-- Times inseridos via JS -->
        </div>

        <div class="divider"></div>

        <!-- Se√ß√£o Eventos -->
        <h2 style="margin-bottom: 16px; margin-top: 10px;">Minhas Inscri√ß√µes</h2>
        <div id="my-events-list">
            <!-- Eventos inseridos via JS -->
        </div>
        
        <div id="empty-my-events" class="text-center hidden" style="margin-top: 40px; color: #999;">
            <span style="font-size: 2rem;">‚òπ</span>
            <p>Voc√™ ainda n√£o participa de nenhum evento.</p>
            <button class="btn btn-secondary" onclick="navigateTo('screen-feed')">Buscar Eventos</button>
        </div>
    </div>

    <!-- TELA: RANKING GERAL -->
    <div id="screen-ranking" class="view">
        <h2 style="margin-bottom: 16px;">Ranking Geral üèÜ</h2>
        <p class="text-small" style="margin-bottom: 15px;">Os alunos mais engajados do campus.</p>
        
        <div class="ranking-table" id="ranking-list">
            <!-- Lista de ranking via JS -->
        </div>
    </div>

    <!-- TELA: PERFIL -->
    <div id="screen-profile" class="view">
        <h2 style="margin-bottom: 16px;">Meu Perfil</h2>
        
        <div class="profile-header">
            <div class="avatar" id="profile-avatar">A</div>
            <h3 id="profile-name">Nome do Usu√°rio</h3>
            <span id="profile-email" style="color: #777; font-size: 0.9rem;">email@ifsp.edu.br</span>
            
            <!-- Stats de Gamifica√ß√£o -->
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="profile-points">0</div>
                    <div class="stat-label">Pontos</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="profile-level">BRONZE</div>
                    <div class="stat-label">N√≠vel</div>
                </div>
                <div class="stat-item" onclick="navigateTo('screen-ranking')" style="cursor: pointer;">
                    <div class="stat-value" id="profile-rank">-</div>
                    <div class="stat-label" style="text-decoration: underline; color: var(--ifsp-green);">Ver Rank</div>
                </div>
            </div>
        </div>

        <h4 style="margin-bottom: 10px;">Meus Interesses</h4>
        <div class="interest-chips" id="interests-list">
            <!-- Chips gerados via JS -->
        </div>

        <div style="margin-top: 30px;">
            <div class="divider"></div>
            <div class="text-center" style="margin-top: 20px;">
                <span class="text-danger" onclick="doLogout()">Sair da Conta</span>
            </div>
        </div>
    </div>

    <!-- TELA 3: CADASTRO DE EVENTO -->
    <div id="screen-create-event" class="view">
        <h2 style="margin-bottom: 20px;">Novo Evento</h2>
        <form id="form-create-event" onsubmit="handleCreateEvent(event)">
            <div class="form-group">
                <label>Nome do Evento</label>
                <input type="text" id="evt-nome" required placeholder="Ex: Interclasse 2024">
            </div>
            <div class="form-group">
                <label>Descri√ß√£o</label>
                <textarea id="evt-desc" rows="3" placeholder="Regras e detalhes..."></textarea>
            </div>
            <div style="display: flex; gap: 10px;">
                <div class="form-group" style="flex: 1;">
                    <label>In√≠cio</label>
                    <input type="date" id="evt-inicio" required>
                </div>
                <div class="form-group" style="flex: 1;">
                    <label>Fim</label>
                    <input type="date" id="evt-fim" required>
                </div>
            </div>
            <div class="form-group">
                <label>Modalidade</label>
                <select id="evt-modalidade">
                    <option value="Futsal">Futsal</option>
                    <option value="Volei">V√¥lei</option>
                    <option value="Xadrez">Xadrez</option>
                    <option value="Handebol">Handebol</option>
                </select>
            </div>
            <div class="form-group">
                <label>Status Inicial</label>
                <select id="evt-status">
                    <option value="INSCRICOES_ABERTAS">Inscri√ß√µes Abertas</option>
                    <option value="AGUARDANDO_INICIO">Aguardando In√≠cio</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary">Salvar Evento</button>
        </form>
    </div>

    <!-- TELA: CRIAR TIME -->
    <div id="screen-create-team" class="view">
        <h2 style="margin-bottom: 20px;">Criar Time</h2>
        <form onsubmit="handleCreateTeam(event)">
            <div class="form-group">
                <label>Nome do Time</label>
                <input type="text" id="team-name" required placeholder="Ex: Os Imbat√≠veis">
            </div>
            <div class="form-group">
                <label>Modalidade</label>
                <select id="team-modality">
                    <option value="Futsal">Futsal</option>
                    <option value="Volei">V√¥lei</option>
                    <option value="Xadrez">Xadrez</option>
                    <option value="Handebol">Handebol</option>
                </select>
            </div>
            <p class="text-small">Voc√™ ser√° o capit√£o deste time.</p>
            <button type="submit" class="btn btn-primary">Criar Time</button>
        </form>
    </div>

    <!-- TELA 4: DETALHES DO EVENTO -->
    <div id="screen-event-details" class="view">
        <div id="event-info-container" style="margin-bottom: 10px;">
            <!-- Inserido via JS -->
        </div>
        
        <!-- √ÅREA DO GESTOR: APROVA√á√ÉO -->
        <div id="admin-approval-area" class="hidden" style="background-color: #fff3e0; padding: 12px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #ffe0b2;">
            <h4 style="color: #e65100; margin-bottom: 8px; display: flex; align-items: center;">
                <span class="material-symbols-outlined" style="font-size: 1.2rem; margin-right: 5px;">verified_user</span>
                Aprova√ß√µes Pendentes
            </h4>
            <div id="pending-teams-list">
                <!-- Lista de times pendentes via JS -->
            </div>
        </div>

        <div style="background: #eee; padding: 10px; border-radius: 8px; margin-bottom: 15px; display: flex; justify-content: space-around; text-align: center;">
            <small style="color: #555;">Jogos da Competi√ß√£o</small>
        </div>
        <div id="matches-list"></div>
    </div>

    <!-- TELA 5: S√öMULA / VOTA√á√ÉO -->
    <div id="screen-match-details" class="view">
        <div class="card text-center" style="margin-bottom: 20px;">
            <span class="tag andamento" style="margin-bottom: 10px;">EM ANDAMENTO</span>
            <h2 style="color: var(--ifsp-green);" id="match-title-display">Final - Futsal</h2>
            
            <div class="match-score" style="margin: 20px 0;">
                <div style="flex: 1;">
                    <strong style="display: block; font-size: 1.2rem;" id="team-a-display">Time A</strong>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <input type="number" id="score-a" class="team-score" value="0">
                    <span>X</span>
                    <input type="number" id="score-b" class="team-score" value="0">
                </div>
                <div style="flex: 1;">
                    <strong style="display: block; font-size: 1.2rem;" id="team-b-display">Time B</strong>
                </div>
            </div>

            <div class="form-group" style="text-align: left;">
                <label>Ocorr√™ncias / S√∫mula</label>
                <textarea rows="3" placeholder="Cart√µes, observa√ß√µes..."></textarea>
            </div>

            <button class="btn btn-primary" onclick="saveMatchResult()">Salvar Resultado</button>
            <button class="btn btn-secondary" style="margin-top: 10px;" onclick="approveResult()">Aprovar (Gestor)</button>
        </div>

        <!-- VOTA√á√ÉO CRAQUE DA GALERA -->
        <h3 style="margin-bottom: 10px;">Vota√ß√£o: Craque da Galera ‚öΩ</h3>
        <div id="voting-list">
            <!-- Lista de jogadores para votar -->
        </div>
    </div>

    <!-- NAVEGA√á√ÉO INFERIOR -->
    <nav id="bottom-nav" class="bottom-nav hidden">
        <div class="nav-item active" id="nav-home" onclick="navigateTo('screen-feed')">
            <span class="nav-icon"><span class="material-symbols-outlined">home</span></span>
            <span>In√≠cio</span>
        </div>
        <div class="nav-item" id="nav-communities" onclick="navigateTo('screen-communities')">
            <span class="nav-icon"><span class="material-symbols-outlined">groups</span></span>
            <span>Comunidades</span>
        </div>
        <div class="nav-item" id="nav-events" onclick="navigateTo('screen-my-events')">
            <span class="nav-icon"><span class="material-symbols-outlined">trophy</span></span>
            <span>Times</span>
        </div>
        <div class="nav-item" id="nav-profile" onclick="navigateTo('screen-profile')">
            <span class="nav-icon"><span class="material-symbols-outlined">person</span></span>
            <span>Perfil</span>
        </div>
    </nav>

</div>

<!-- Link para o arquivo JS externo -->
<script src="script.js"></script>

</body>
</html>